<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pet Doctor</title>

    <!-- PWA Settings -->
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PetDoctor">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3047/3047928.png">

    <!-- Prefetch Main Tabs to eliminate first-click latency -->
    <link rel="prefetch" href="/scan">
    <link rel="prefetch" href="/history">
    <link rel="prefetch" href="/vet">
    <link rel="prefetch" href="/my">
    <link rel="prefetch" href="/new">

    <!-- Local Tailwind -->
    <script src="/js/tailwindcss.js?v=2"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0175C2',
                        background: '#1a1c29',
                        surface: 'rgba(255, 255, 255, 0.1)',
                    },
                    padding: {
                        'safe': 'env(safe-area-inset-bottom)',
                    }
                }
            }
        }
    </script>

    <!-- Hotwire Turbo -->
    <script src="/js/turbo.js"></script>

    <style>
        body {
            background: linear-gradient(to bottom, #1a1c29, #12141c);
            color: white;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            touch-action: manipulation;
        }

        .glass {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.2);
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="antialiased pb-24">
    <%- body %>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 w-full glass rounded-t-3xl pb-safe z-50">
            <div class="flex justify-around items-center h-20 px-4">
                <!-- 1. Home -->
                <a href="/"
                    class="flex flex-col items-center gap-1 transition-colors <%= path === '/' || path === '/home' ? 'text-white' : 'text-white/40' %>">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                    </svg>
                    <span class="text-xs font-medium">홈</span>
                </a>

                <!-- 2. Scan -->
                <a href="/scan"
                    class="flex flex-col items-center gap-1 transition-colors <%= path.startsWith('/scan') ? 'text-white' : 'text-white/40' %>">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M3 5v4h2V5h4V3H5a2 2 0 00-2 2zm2 10H3v4a2 2 0 002 2h4v-2H5v-4zm14 4h-4v2h4a2 2 0 002-2v-4h-2v4zm0-16h-4v2h4v4h2V5a2 2 0 00-2-2z" />
                    </svg>
                    <span class="text-xs font-medium">검사</span>
                </a>

                <!-- 3. History -->
                <a href="/history"
                    class="flex flex-col items-center gap-1 transition-colors <%= path.startsWith('/history') ? 'text-white' : 'text-white/40' %>">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M13 3a9 9 0 109 9 9 9 0 00-9-9zm1 14h-2v-2h2v2zm0-4h-2V7h2v6z" />
                    </svg>
                    <span class="text-xs font-medium">기록</span>
                </a>

                <!-- 4. Vet -->
                <a href="/vet"
                    class="flex flex-col items-center gap-1 transition-colors <%= path.startsWith('/vet') ? 'text-white' : 'text-white/40' %>">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-6 14H5v-5h8v5zm6 0h-4v-5h4v5zm0-7H5V5h14v5z" />
                    </svg>
                    <span class="text-xs font-medium">상담</span>
                </a>

                <!-- 5. My -->
                <a href="/my"
                    class="flex flex-col items-center gap-1 transition-colors <%= path.startsWith('/my') ? 'text-white' : 'text-white/40' %>">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                    <span class="text-xs font-medium">마이</span>
                </a>
            </div>
        </nav>
</body>

</html>