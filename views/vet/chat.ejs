<div class="p-6 pt-12 pb-32 flex flex-col min-h-screen">
    <!-- Header -->
    <div class="flex items-center gap-4 mb-6">
        <a href="/vet" class="p-2 bg-white/10 rounded-full">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </a>
        <h1 class="text-xl font-bold">AI 수의사 상담</h1>
    </div>

    <!-- Chat Messages Area -->
    <div class="flex-1 space-y-4 overflow-y-auto hide-scrollbar mb-4" id="chatMessages">
        <!-- AI Welcome Message -->
        <div class="flex gap-3">
            <div class="w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                    </path>
                </svg>
            </div>
            <div class="glass p-4 rounded-2xl rounded-tl-none max-w-[80%]">
                <p class="text-sm">안녕하세요! 저는 AI 수의사 도우미입니다. 🐾</p>
                <p class="text-sm mt-2">반려동물의 건강에 대해 궁금한 점이 있으시면 무엇이든 물어보세요. 소변 검사 결과 해석, 일반적인 건강 정보, 증상에 대한 조언 등을 도와드릴
                    수 있습니다.</p>
                <p class="text-xs text-gray-400 mt-2">* 이 서비스는 참고용이며, 정확한 진단을 위해서는 반드시 수의사와 상담하세요.</p>
            </div>
        </div>

        <!-- Sample Question Chips -->
        <div class="flex flex-wrap gap-2 px-2">
            <button
                class="question-chip px-3 py-2 bg-white/10 rounded-full text-xs hover:bg-white/20 transition-colors">
                소변에서 피가 보여요
            </button>
            <button
                class="question-chip px-3 py-2 bg-white/10 rounded-full text-xs hover:bg-white/20 transition-colors">
                pH 수치가 높으면?
            </button>
            <button
                class="question-chip px-3 py-2 bg-white/10 rounded-full text-xs hover:bg-white/20 transition-colors">
                단백뇨가 뭔가요?
            </button>
            <button
                class="question-chip px-3 py-2 bg-white/10 rounded-full text-xs hover:bg-white/20 transition-colors">
                물을 너무 많이 마셔요
            </button>
        </div>
    </div>

    <!-- Input Area -->
    <div class="glass p-4 rounded-2xl flex gap-3 items-center">
        <input type="text" id="chatInput" placeholder="질문을 입력하세요..."
            class="flex-1 bg-transparent border-none outline-none text-white placeholder-gray-500">
        <button id="sendBtn"
            class="w-10 h-10 bg-primary rounded-full flex items-center justify-center hover:bg-primary/80 transition-colors">
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
            </svg>
        </button>
    </div>
</div>

<script>
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const questionChips = document.querySelectorAll('.question-chip');

    // Sample AI Responses
    const responses = {
        '소변에서 피가 보여요': '소변에서 피가 보이는 것(혈뇨)은 여러 원인이 있을 수 있습니다:\n\n• 방광염 또는 요로감염\n• 결석(방광, 신장)\n• 외상\n• 종양(드물지만 가능)\n\n🔔 혈뇨가 보이면 가능한 빨리 동물병원을 방문하시는 것이 좋습니다. 특히 소변을 볼 때 힘들어하거나, 자주 소변을 보거나, 식욕이 떨어졌다면 더욱 서둘러 주세요.',
        'pH 수치가 높으면?': '소변 pH가 높다는 것은 알칼리성 소변을 의미합니다.\n\n📊 정상 범위: 강아지 6.0-7.0, 고양이 6.0-6.5\n\n높은 pH의 원인:\n• 요로감염 (가장 흔함)\n• 식이 요인 (채식 위주 식단)\n• 스트루바이트 결석 위험 증가\n\n💡 지속적으로 pH가 높다면 수의사와 상담하여 식이 조절이나 추가 검사를 고려해 보세요.',
        '단백뇨가 뭔가요?': '단백뇨는 소변에 단백질이 검출되는 상태입니다.\n\n⚠️ 지속적인 단백뇨는 다음을 의심할 수 있어요:\n• 신장 질환 (사구체 문제)\n• 요로감염\n• 고혈압\n\n✅ 일시적인 단백뇨는:\n• 격렬한 운동 후\n• 스트레스 상황\n• 발열 시\n\n정기적인 검사로 추이를 지켜보는 것이 중요합니다.',
        '물을 너무 많이 마셔요': '과음(다음)은 다양한 원인이 있을 수 있습니다:\n\n🔍 주요 원인:\n• 당뇨병\n• 신장 질환\n• 쿠싱 증후군\n• 갑상선 기능 항진증 (특히 고양이)\n• 약물 부작용\n\n📝 체크 포인트:\n• 하루 음수량 측정 (체중 kg당 60ml 이상이면 과음)\n• 소변량과 횟수도 함께 확인\n• 식욕, 체중 변화 관찰\n\n⚠️ 갑자기 물을 많이 마시기 시작했다면 수의사 상담을 권장합니다.'
    };

    function addMessage(text, isUser) {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'flex gap-3 ' + (isUser ? 'justify-end' : '');

        if (isUser) {
            messageDiv.innerHTML = `
                <div class="bg-primary p-4 rounded-2xl rounded-tr-none max-w-[80%]">
                    <p class="text-sm">${text}</p>
                </div>
            `;
        } else {
            messageDiv.innerHTML = `
                <div class="w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                    </svg>
                </div>
                <div class="glass p-4 rounded-2xl rounded-tl-none max-w-[80%]">
                    <p class="text-sm whitespace-pre-line">${text}</p>
                </div>
            `;
        }

        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function handleQuestion(question) {
        addMessage(question, true);

        // Simulate typing delay
        setTimeout(() => {
            const response = responses[question] || '죄송합니다. 해당 질문에 대한 정보가 준비되지 않았습니다. 다른 질문을 해주시거나, 자세한 상담은 수의사에게 직접 문의해 주세요. 🐾';
            addMessage(response, false);
        }, 1000);
    }

    // Event Listeners
    questionChips.forEach(chip => {
        chip.addEventListener('click', () => {
            handleQuestion(chip.textContent.trim());
        });
    });

    sendBtn.addEventListener('click', () => {
        const text = chatInput.value.trim();
        if (text) {
            handleQuestion(text);
            chatInput.value = '';
        }
    });

    chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const text = chatInput.value.trim();
            if (text) {
                handleQuestion(text);
                chatInput.value = '';
            }
        }
    });
</script>